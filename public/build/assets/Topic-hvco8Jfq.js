import{r as y,j as r}from"./app-3B0Yr8VL.js";import h from"./Question-DenpGt0v.js";function Q({topic:t,colors:u,path:a=[],handleTopicChange:n,addSubTopic:c,removeTopic:x,index:k,setRemovedQuestions:m,setRemovedAnswers:d}){const[g,b]=y.useState(null),j=()=>{const s=[...t.questions||[],{id:null,title:"",answers:[{id:null,text:"",is_correct:!1}]}];n(a,"questions",s)},f=e=>{const s=[...t.questions||[]],l=s[e];l!=null&&l.id&&m(i=>[...i,l.id]),l.answers&&l.answers.forEach(i=>{i.id&&d(o=>[...o,i.id])}),s.splice(e,1),n(a,"questions",s)},v=e=>{const s=[...t.questions||[]];s[e].answers||(s[e].answers=[]),s[e].answers.push({id:null,text:"",is_correct:!1}),n(a,"questions",s)},w=(e,s)=>{const l=[...t.questions||[]],i=l[e].answers[s];i!=null&&i.id&&d(o=>[...o,i.id]),l[e].answers.splice(s,1),n(a,"questions",l)},N=(e,s,l,i=null)=>{const o=[...t.questions||[]];s==="answers"&&i!==null?o[e].answers[i]=l:o[e][s]=l,n(a,"questions",o)};return y.useEffect(()=>{if(!t.image){b(null);return}const e=URL.createObjectURL(t.image);return b(e),()=>URL.revokeObjectURL(e)},[t]),r.jsx("div",{style:{backgroundColor:t.color!=="#000000"?t.color:"#f9fafb"},className:"pl-4 py-1 pr-1 border rounded-xl dark:border-gray-600 bg-gray-50 dark:bg-gray-700 rounded-md space-y-4 mb-2",children:r.jsxs("div",{className:"bg-white dark:bg-gray-900 p-5 rounded-r-xl relative",children:[r.jsx("button",{type:"button",onClick:()=>x(a),className:"absolute top-2 right-2 z-9 w-10 h-10 text-sm text-red-500 hover:underline",children:"âœ•"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Topic Title"}),r.jsx("input",{type:"text",value:t.title,onChange:e=>n(a,"title",e.target.value),className:"mt-1 w-full px-3 py-2 rounded-md border dark:bg-gray-800 dark:border-gray-600 dark:text-white",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Description"}),r.jsx("textarea",{value:t.description,onChange:e=>n(a,"description",e.target.value),className:"mt-1 w-full px-3 py-2 rounded-md border dark:bg-gray-800 dark:border-gray-600 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Video URL"}),r.jsx("input",{type:"url",value:t.video||"",onChange:e=>n(a,"video",e.target.value),className:"mt-1 w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image"}),g?r.jsx("img",{src:g,className:"pt-4",alt:"Preview"}):t.image_path&&r.jsx("img",{src:`storage/${t.image_path}`,className:"pt-4",alt:"Current"}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>n(a,"image",e.target.files[0]),className:"mt-1 block w-full text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"Color"}),r.jsx("div",{className:"flex space-x-3",children:u.map(e=>r.jsx("button",{type:"button",onClick:()=>n(a,"color",e),className:`w-8 h-8 rounded-full border-2 ${t.color===e?"border-black dark:border-white":"border-transparent"}`,style:{backgroundColor:e}},e))})]}),r.jsxs("div",{className:"mt-6 border-t pt-4",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 mb-3",children:"Questions in this Topic"}),Array.isArray(t.questions)&&t.questions.map((e,s)=>r.jsx(h,{question:e,index:s,handleQuestionChange:N,addAnswer:v,removeAnswer:w,removeQuestion:f},s)),Array.isArray(t.topics)&&t.topics.map((e,s)=>r.jsx(Q,{index:s,addSubTopic:c,handleTopicChange:n,path:[...a,s],removeTopic:x,topic:e,colors:u,setRemovedQuestions:m,setRemovedAnswers:d},s)),r.jsx("button",{type:"button",onClick:j,className:"text-green-600 hover:underline",children:"+ Add Question to this Topic"})]}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{type:"button",onClick:()=>c(a),className:"text-indigo-600 hover:underline",children:"+ Add SubTopic"})})]})},k)}export{Q as default};
